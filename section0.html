<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ecallen</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://latex.now.sh/style.css" />
</head>
<body>
<button id="dark-mode-toggle">Toggle dark mode</button>
<header id="title-block-header">
<h1 class="title">ecallen</h1>
</header>
<h1 id="zettelkasten">Zettelkasten</h1>
<p>A co-worker of mine used to keep all his notes in one large notepad
file. He literally used Windows notepad.Then when he needed to check his
notes, he would simply do keyword searches on the file. It went back
years and proved to be a better reference than a fancy knowledge base.
This file is a similar dump for myself. It includes everything I read,
notes and cheatsheets. Organized with markdown but may move for emacs
org mode format in the future. Creative commons license.<br />
## Ideas and Slogans</p>
<p>https://slife.org/japanese-proverbs/</p>
<p>成功する事よりも、失敗しない事の方が重要だ。- Seikou suru koto yori
mo, shippai shinai koto no hou ga juuyou da.</p>
<p>Meaning: It’s more important to not fail than to succeed.</p>
<p>“I constantly see people rise in life who are not the smartest,
sometimes not even the most diligent, but they are learning machines.
They go to bed every night a little wiser than they were when they got
up and boy does that help, particularly when you have a long run ahead
of you.” ― Charles T. Munger</p>
<p>Simple tools for complex interactions</p>
<p>Tools over process</p>
<p>Reality captured in user friendly symbols and processed for
understanding. ― Slogan for the idea channel ## Reading/Books</p>
<h3 id="neural-networks-from-scratch">Neural Networks From Scratch</h3>
<p>Layers</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Layer_Dense:</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, n_inputs, n_neurons):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.weights <span class="op">=</span> <span class="fl">0.01</span> <span class="op">*</span> np.random.randr(n_inputs, n_neurons)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.biases <span class="op">=</span> np.zeros((<span class="dv">1</span>, n_neurons))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> forward(<span class="va">self</span>, inputs):</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.output <span class="op">=</span> np.dot(inputs,<span class="va">self</span>.weights) <span class="op">+</span> <span class="va">self</span>.biases</span></code></pre></div>
<p>one_hot = [0, 1, 0, 0, 0, 0]</p>
<p>Activation Functions</p>
<p>softmax activation outputs a probability distribution</p>
<p>example output: soft_max = [0.9, 1.2, 0.6]</p>
<p>Loss functions</p>
<p>Categorial cross entropy is used to compare ground truth probability
(y targets) against predictions (y-hat)</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; one hot encoding &quot;&quot;&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>target_values <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>softmax_output <span class="op">=</span> [<span class="fl">0.7</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; note: natural log e**x = b &quot;&quot;&quot;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>loss <span class="op">=</span> <span class="op">-</span>(math.log(softmax_output[<span class="dv">0</span>]))</span></code></pre></div>
<p>Generic loss class</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Loss:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> calculate(<span class="va">self</span>, output, y):</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    sample_losses <span class="op">=</span> <span class="va">self</span>.forward(output,y)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    data_loss <span class="op">=</span> np.mean(sample_losses) </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data_loss</span></code></pre></div>
<p>Cross Entropy Loss class</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h3 id="ecdsa">ECDSA</h3>
<p>https://www.instructables.com/Understanding-how-ECDSA-protects-your-data/</p>
<p>Allows verification of authenticity without compromising security. It
is impossible to forge a signature. It does no encrypt the data but
ensures it is not tampered with.</p>
<p>Algo (high level)</p>
<p>choose random point on curve, point of origin</p>
<p>generate a random number, private keys</p>
<p>apply equation to private key and point of origin, public key</p>
<p>Sign the file</p>
<p>equation(use the private key, with a hash of the file), signature</p>
<p>signature is divided into R and S</p>
<p>Verification</p>
<p>equation(S, public key) == R</p>
<p>ECDSA uses SHA1 hashes</p>
<h3 id="mastering-bitcoin">Mastering Bitcoin</h3>
<p>transaction input and output - there will be a difference between
them which is the miner fee</p>
<p>transactions form a chain</p>
<p>users keys can unlock previous output in the chain proving
ownership</p>
<p>change address - address of new and old user</p>
<p>UTXO - unspent transactions database ### (Ethereum
Book)[https://github.com/ethereumbook/ethereumbook] ### Fallback
functions</p>
<p>It is called when a non-existent function is called on the
contract.</p>
<p>It is required to be marked external.</p>
<p>It has no name.</p>
<p>It has no arguments</p>
<p>It can not return any thing.</p>
<p>It can be defined one per contract.</p>
<p>If not marked payable, it will throw exception if contract receives
plain ether without data.</p>
<p>Solidity fallback function:</p>
<p>It has no name, no arguments, no return values. It external and
payable. Defined once. Called when non-existent function called.</p>
<h3 id="eoa-vs.-contract-accounts">EOA vs. Contract Accounts</h3>
<p>Externally owned accounts are those that have a private key; having
the private key means control over access to funds or contracts.</p>
<p>A contract account has smart contract code, which a simple EOA can’t
have. Furthermore, a contract account does not have a private key.
Instead, it is owned (and controlled) by the logic of its smart contract
code: the software program recorded on the Ethereum blockchain at the
contract account’s creation and executed by the EVM.</p>
<p>account addresses are derived directly from private keys: a private
key uniquely determines a single Ethereum address, also known as an
account.</p>
<h3 id="cryptography">Cryptography</h3>
<p>There is no encryption as part of the Ethereum protocol—all messages
that are sent as part of the operation of the Ethereum network can
(necessarily) be read by everyone. As such, private keys are only used
to create digital signatures for transaction authentication.</p>
<p>Starting with a private key in the form of a randomly generated
number k, we multiply it by a predetermined point on the curve called
the generator point G to produce another point somewhere else on the
curve, which is the corresponding public key K: K = k * G</p>
<p>the generator point is always the same for all Ethereum users</p>
<p>Ethereum only uses uncompressed public keys; therefore the only
prefix that is relevant is (hex) 04.</p>
<p>The test most commonly used for a hash function is the empty input.
If you run the hash function with an empty string as input you should
see the following results:</p>
<p>Keccak256(““) =
c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470</p>
<p>SHA3(““) =
a7ffc6f8bf1ed76651c14756a061d662f580ff4de43b49fa82d80a4b80f8434a</p>
<p>Ethereum uses Keccak-256, even though it is often called SHA-3 in the
code.</p>
<p>Ethereum addresses are unique identifiers that are derived from
public keys or contracts using the Keccak-256 one-way hash function.</p>
<p>We use Keccak-256 to calculate the hash of this public key:</p>
<p>Keccak256(K) =
2a5bc342ed616b5ba5732269001d3f1ef827552ae1114027bd3ecf1f086ba0f9</p>
<p>Then we keep only the last 20 bytes (least significant bytes), which
is our Ethereum address:</p>
<p>001d3f1ef827552ae1114027bd3ecf1f086ba0f9</p>
<h3 id="wallet">Wallet</h3>
<h3 id="transactions">Transactions</h3>
<p>A transaction is a serialized binary message that contains the
following data:</p>
<p>Nonce</p>
<p>A sequence number, issued by the originating EOA, used to prevent
message replay</p>
<p>Gas price</p>
<p>The amount of ether (in wei) that the originator is willing to pay
for each unit of gas</p>
<p>Gas limit</p>
<p>The maximum amount of gas the originator is willing to buy for this
transaction</p>
<p>Recipient</p>
<p>The destination Ethereum address</p>
<p>Value</p>
<p>The amount of ether (in wei) to send to the destination</p>
<p>Data</p>
<p>The variable-length binary data payload</p>
<p>v,r,s</p>
<p>The three components of an ECDSA digital signature of the originating
EOA</p>
<h3 id="smart-contracts-and-solidity">Smart Contracts and Solidity</h3>
<p>Computer programs</p>
<p>Smart contracts are simply computer programs. The word “contract” has
no legal meaning in this context.</p>
<p>Immutable</p>
<p>Once deployed, the code of a smart contract cannot change. Unlike
with traditional software, the only way to modify a smart contract is to
deploy a new instance.</p>
<p>Deterministic</p>
<p>The outcome of the execution of a smart contract is the same for
everyone who runs it, given the context of the transaction that
initiated its execution and the state of the Ethereum blockchain at the
moment of execution.</p>
<p>EVM context</p>
<p>Smart contracts operate with a very limited execution context. They
can access their own state, the context of the transaction that called
them, and some information about the most recent blocks.</p>
<p>Decentralized world computer</p>
<p>The EVM runs as a local instance on every Ethereum node, but because
all instances of the EVM operate on the same initial state and produce
the same final state, the system as a whole operates as a single “world
compute</p>
<h4 id="lifecycle">Lifecycle</h4>
<p>0x0 special contract creation address</p>
<p>contracts only run if they are called by a transaction</p>
<p>contracts are atomic</p>
<p>To delete a contract, you execute an EVM opcode called SELFDESTRUCT.
That operation costs “negative gas,” a gas refund, thereby incentivizing
the release of network client resources from the deletion of stored
state.</p>
<h4 id="solidity">Solidity</h4>
<p>function syntax:</p>
<p>function FunctionName([parameters])
{public|private|internal|external} [pure|view|payable] [modifiers]
[returns (return types)]</p>
<h4 id="gas">Gas</h4>
<p>estimating gas cost:</p>
<p>var contract = web3.eth.contract(abi).at(address); var gasEstimate =
contract.myAweSomeMethod.estimateGas(arg1, arg2, {from: account});</p>
<p>To obtain the gas price from the network you can use:</p>
<p>var gasPrice = web3.eth.getGasPrice();</p>
<p>And from there you can estimate the gas cost:</p>
<p>var gasCostInEther = web3.utils.fromWei((gasEstimate * gasPrice),
‘ether’);</p>
<h3 id="security">Security</h3>
<h4 id="re-entrency">Re-entrency</h4>
<p>This type of attack can occur when a contract sends ether to an
unknown address. An attacker can carefully construct a contract at an
external address that contains malicious code in the fallback
function.</p>
<h5 id="prevention">prevention</h5>
<p>The first is to (whenever possible) use the built-in transfer
function when sending ether to external contracts.</p>
<p>The second technique is to ensure that all logic that changes state
variables happens before ether is sent out of the contract (or any
external call).</p>
<p>A third technique is to introduce a mutex.</p>
<h4 id="over-flow-under-flow">over flow under flow</h4>
<h5 id="prevention-1">prevention</h5>
<p>The current conventional technique to guard against under/overflow
vulnerabilities is to use or build mathematical libraries that replace
the standard math operators addition, subtraction, and multiplication
(division is excluded as it does not cause over/underflows and the EVM
reverts on division by 0).</p>
<h3 id="tokens">Tokens</h3>
<h4 id="interface">Interface</h4>
<p>ERC20</p>
<p>The ERC20 Interface in Solidity:</p>
<pre class="solidity"><code>
contract ERC20 {
function totalSupply() constant returns (uint theTotalSupply);
function balanceOf(address _owner) constant returns (uint balance);
function transfer(address _to, uint _value) returns (bool success);
function transferFrom(address _from, address _to, uint _value) returns
(bool success);
function approve(address _spender, uint _value) returns (bool success);
function allowance(address _owner, address _spender) constant returns
(uint remaining);
event Transfer(address indexed _from, address indexed _to, uint _value);
event Approval(address indexed _owner, address indexed _spender, uint _value);
}
</code></pre>
<p>data structures</p>
<p>mapping(address =&gt; uint256) balances;</p>
<p>mapping (address =&gt; mapping (address =&gt; uint256)) public
allowed;</p>
<h4 id="workflows">Workflows</h4>
<ol type="1">
<li><p>transfer - wallet to wallet direct transfer of tokens, uses the
‘transfer’ function</p></li>
<li><p>approve and transfer - two transaction</p></li>
</ol>
<script>
    const darkModeToggle = document.getElementById('dark-mode-toggle')
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('latex-dark')
    })
</script>
<br>
<br>
<hr>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.

</body>
</html>
