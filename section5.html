<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ecallen</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://latex.now.sh/style.css" />
</head>
<body>
<button id="dark-mode-toggle">Toggle dark mode</button>
<header id="title-block-header">
<h1 class="title">ecallen</h1>
</header>
<h1 id="programming">Programming</h1>
<h2 id="docker">Docker</h2>
<p>docker init - create a Dockerfile</p>
<p>docker build -t <tag> . - build a docker image</p>
<p>docker run -d –name mycontainer -p 80:80 myimage</p>
<p>docker rm <container id></p>
<h2 id="ollama">Ollama</h2>
<p>ollama list - list all models</p>
<p>ollama run codellama:7b - download and run the 7 billion parameter
codellama model</p>
<p>ollama run codellama:7b-python - fine tuned model for python</p>
<h2 id="tailwind">Tailwind</h2>
<p>tailwindcss -w -i styles/main.css -o static/css/main.css</p>
<h2 id="python">Python</h2>
<h3 id="alembic">alembic</h3>
<p>alembic downgrade base</p>
<p>alembic upgrade head - upgrade to latest version</p>
<p>alembic revision –autogenerate -m “some comments”</p>
<p>dis.dis(<func>) - disassemble a function</p>
<p>dir(<object>)</p>
<p>help(<object>)</p>
<p>identity - location in memory of an object</p>
<p>id(<var>) - location in memory</p>
<p>type(<var>)</p>
<p>mutable - dict,list</p>
<p>immutable - strings tuples, integers *reassignment changes
identity</p>
<p>Dunder methods - Double UNDERscore methods “<strong>add</strong>” or
magic methods</p>
<p>help(object.method)</p>
<p>File iterate through file</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;somefile&#39;</span>,<span class="st">&#39;r&#39;</span>) <span class="im">as</span> my_file:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> line <span class="kw">in</span> my_file:</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(line)</span></code></pre></div>
<p>coerce booleans</p>
<p>ex.</p>
<p>bool(0) -&gt; False</p>
<p>bool(4) -&gt; True</p>
<p>singleton - one copy, example None</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="va">None</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="va">None</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">id</span>(a)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="bu">id</span>(b)</span></code></pre></div>
<p>will be the same value</p>
<p>PEP8 prefer 4 spaces to indent code</p>
<p>define a list names = [‘Evee’,‘Harper’,‘Lily’,‘Linus’]</p>
<p>A for loop ccan have a else clause. Code in the else clause will
execute if the for loop did not hit a break statement.</p>
<pre class="python:"><code>
positive = False
for num in items:
if num &lt; 0:
break
else:
postive = True
</code></pre>
<p>set default method</p>
<pre class="python:"><code>
count = {}
for name in names:
count.setdefault(name,0)
count[name] += 1


def funcname(arg):
body

stride
every_other_name[0:4:2]

Files
fin = open(&#39;etc/passwd&#39;)
for line in fin:
print line

with open(&#39;/tmp/names.txt&#39;,&#39;w&#39;) as fout:
fout.write(&#39;Evee\n&#39;)

Using file as seq
def add_numbers(filename):
with open(filename) as fin:
return add_nums_to_seq(fin)

def add_nums_to_seq(seq):
results = []
for num, line in enumerate(seq):
enumerate(seq):
results.append(&#39;{0}-{1}&#39;.format(num,line))
return results
</code></pre>
<p>Object - grouping together state and methods</p>
<p>Class - define objects</p>
<p>class Animal</p>
<p>generator example</p>
<pre class="python:"><code>
xs = (x for x in range(4))
xs.__next__()
</code></pre>
<h3 id="introspection">Introspection</h3>
<p>objects store their type in their <strong>class</strong> attr</p>
<p>type()</p>
<p>issubclass()</p>
<p>isinstance()</p>
<p>dir()</p>
<p>hasattr(<object>, ‘attr’)</p>
<p>getattr(<object>, ‘attr’) or <object>.’attr’ example
a.denonminator</p>
<p>prefer EAFP easier to as for forgiveness</p>
<p>globals() - introspect the global namespace</p>
<p>globals()[foo] = ‘bar’ &lt;– globals dict IS the global namespace</p>
<p>locals() - introspect the local namespace</p>
<p>f-strings - PEP 498, ex. f”{name}”</p>
<p>inspect module :wqa</p>
<h3 id="django">Django</h3>
<ul>
<li>start a project</li>
</ul>
<p>django-admin startproject myproject</p>
<ul>
<li>run project</li>
</ul>
<p>python manage.py runserver</p>
<ul>
<li>create a app</li>
</ul>
<p>python manage.py startapp <app></p>
<ul>
<li>show migrations</li>
</ul>
<p>python manage.py showmigrations</p>
<ul>
<li>run all pending migrations</li>
</ul>
<p>python manage.py migrate</p>
<ul>
<li>create migrations based on models</li>
</ul>
<p>python manage.py makemigrations</p>
<ul>
<li>see a specific migration</li>
</ul>
<p>python manage.py sqlmigrate <migration></p>
<ul>
<li>misc</li>
</ul>
<p>python manage.py createsuperuser</p>
<h4 id="files">Files</h4>
<p>settings.py - INSTALLED_APPS[] list of apps</p>
<p>urls.py - routing</p>
<h3 id="tensorflow">Tensorflow</h3>
<p>rule of thumb: each layer powers of 2, decreasing</p>
<p>model performance/deal with over fitting:</p>
<p>use a dropout layer</p>
<p>start with 20 - 30%</p>
<p>will result in more epochs</p>
<p>make more data</p>
<p>for image data</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>keras.preprocessing.image.ImageDataGenerator(....)</span></code></pre></div>
<h4 id="data-wrangling">Data wrangling</h4>
<p>example of loading train a test data sets from tf data sets:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mnist_train, info <span class="op">=</span> tfds.load(<span class="st">&#39;mnist&#39;</span>, split<span class="op">=</span><span class="st">&#39;train&#39;</span>, as_supervised<span class="op">=</span><span class="va">True</span>, with_info<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>mnist_test <span class="op">=</span> tfds.load(<span class="st">&#39;mnist&#39;</span>, split<span class="op">=</span><span class="st">&#39;test&#39;</span>, as_supervised<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>use Keras to retrieve data:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tf.keras.utils.get_file(fn, url, cache_dir<span class="op">=</span>cache_dir, cache_sub_dir<span class="op">=</span>cache_subdir)</span></code></pre></div>
<p>read csv using pandas:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd <span class="co">#&lt;-- pd by convention</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>column_names <span class="op">=</span> [<span class="st">&#39;col1&#39;</span>,<span class="st">&#39;col2&#39;</span>] <span class="co"># assuming first row in csv is not col names</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>some_dataframe <span class="op">=</span> pd.read_csv(path_to_csv, name<span class="op">=</span>column_names)</span></code></pre></div>
<h4 id="models">Models</h4>
<p>example model layers:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>new_model <span class="op">=</span> tf.keras.models.Sequential([</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.InputLayer((<span class="va">None</span>, <span class="dv">1</span>)),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.Conv1D(<span class="dv">30</span>,<span class="dv">6</span>,padding<span class="op">=</span><span class="st">&#39;casual&#39;</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.LSTM(<span class="dv">68</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.Dense(<span class="dv">16</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>])</span></code></pre></div>
<h2 id="commands">Commands</h2>
<p>curl api.ipify.org - return external ip address ## Phoenix -
Elixir</p>
<h3 id="recreate-the-env">Recreate the env</h3>
<p>mix phx.new statmeet</p>
<p>cd statmeet</p>
<p>edit config/dev.exs</p>
<p>mix deps.get</p>
<p>mix ecto.create</p>
<p>mix phx.gen.auth Accounts User users</p>
<p>mix phx.gen.html Markups Note notes contents:text</p>
<h3 id="adding-a-new-page">Adding a new page</h3>
<p>Example of adding Hello page</p>
<h5 id="create-the-route">Create the route</h5>
<p>lib/<app>/router.ex</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>scope <span class="st">&quot;/&quot;</span>, <span class="cn">AppWeb</span> <span class="kw">do</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>get <span class="st">&quot;/somepath&quot;</span>, <span class="cn">HelloController</span>, <span class="va">:index</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h4 id="add-a-new-controller">Add a new controller</h4>
<p>lib/<app>_web/controllers/<app>_controller.ex</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">HelloWeb</span><span class="op">.</span><span class="cn">HelloController</span> <span class="kw">do</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">use</span> <span class="cn">HelloWeb</span>, <span class="va">:controller</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> index<span class="fu">(</span>conn, _params<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>render<span class="fu">(</span>conn, <span class="st">&quot;index.html&quot;</span><span class="fu">)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h4 id="add-a-view">Add a view</h4>
<p>lib/<app>_web/views/<app>_view.ex</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">HelloWeb</span><span class="op">.</span><span class="cn">HelloView</span> <span class="kw">do</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">use</span> <span class="cn">HelloWeb</span>, <span class="va">:view</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h4 id="add-a-template">Add a template</h4>
<p>lib/<app>_web/templates/<app>/index.html.heex</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>section class<span class="op">=</span><span class="st">&quot;phx-hero&quot;</span><span class="op">&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>h2<span class="op">&gt;</span><span class="cn">Hello</span> <span class="cn">World</span>, from <span class="cn">Phoenix</span>!<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>section<span class="op">&gt;</span></span></code></pre></div>
<h3 id="adding-a-new-schema">Adding a new schema</h3>
<p>mix phx.gen.schema Markups markups content:text</p>
<h3 id="adding-formscontext">Adding forms/context</h3>
<p>mix phx.gen.html Catalog Product products title:string
description:string price:decimal views:integer</p>
<h3 id="update-a-model">Update a model</h3>
<p>mix ecto.gen.migration update_notes</p>
<p>edit file in priv/repo/migrations/</p>
<p>mix ecto.migrate ## Elixir</p>
<p>self()</p>
<p>spawn_link(self(), fn -&gt; raise “oops” end)</p>
<p>spawn(…)</p>
<p>send(pid, {:get, :hello, self()})</p>
<p>flush()</p>
<p>{:ok, pid} = Agent.start_link(fn -&gt; %{} end)</p>
<p>Agent.update(pid, fn map -&gt; Map.put(map, :hello, :world) end)</p>
<p>Agent.get(pid, fn map -&gt; Map.get(map, :hello) end)</p>
<p>opts \ [] - optional parameter that will default to empty list ##
pandas</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Cheat sheet &quot;&quot;&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>some_data <span class="op">=</span> pd.read_csv(some_file_path) </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; show cols &quot;&quot;&quot;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>some_data.columns</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Select a column into a pd series &quot;&quot;&quot;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>some_series <span class="op">=</span> some_data.Price</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Selectinng features, note features assigned to &quot;X&quot; var by convention &quot;&quot;&quot;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>some_features <span class="op">=</span> [<span class="st">&#39;price&#39;</span>, <span class="st">&#39;amount&#39;</span>, <span class="st">&#39;sku&#39;</span>]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> some_data[some_features]</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Get shape notice it is a attribute &quot;&quot;&quot;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>some_df.shape</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Selecting &quot;&quot;&quot;</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>some_df.loc[(some_df.some_col <span class="op">==</span> <span class="st">&#39;apples&#39;</span>) <span class="op">&amp;</span> (some_df.another_col <span class="op">==</span> <span class="st">&#39;fuji&#39;</span>)]</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>some_df.loc[(some_df.some_col <span class="op">==</span> <span class="st">&#39;apples&#39;</span>) <span class="op">|</span> (some_df.some_col <span class="op">==</span> <span class="st">&#39;grapes&#39;</span>)]</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>some_df.loc[some_df.some_col.isin([<span class="st">&#39;apples&#39;</span>, <span class="st">&#39;oranges&#39;</span>])</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Mapping map() fun passed to map expects a single value from a Series,</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="st">    returns a new Series. &quot;&quot;&quot;</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>some_mean <span class="op">=</span> some_df.some_feature.mean()</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.<span class="bu">map</span>(<span class="kw">lambda</span> p: p <span class="op">-</span> some_mean)</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Apply apply() - call a fun on each row &quot;&quot;&quot;</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remean_feature(row):</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>row.some_feature <span class="op">=</span> row.some_feature <span class="op">-</span> some_mean</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> row</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>some_df.<span class="bu">apply</span>(remean_feature, axis<span class="op">=</span><span class="st">&#39;columns&#39;</span>)</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Mappings as built-ins &quot;&quot;&quot;</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>some_mean <span class="op">=</span> some_df.some_feature.mean()</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>some_df.some_feature <span class="op">-</span> some_mean</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Combine info &quot;&quot;&quot;</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>some_df.some_feature_1 <span class="op">+</span> <span class="st">&quot; - &quot;</span> <span class="op">+</span> some_df.some_feature_2</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Sorting and grouping &quot;&quot;&quot;</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>some_df.groupby(<span class="st">&#39;feature&#39;</span>)</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>some_df.groupby(<span class="st">&#39;feature&#39;</span>).another_feature.<span class="bu">min</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>some_df.grouby([<span class="st">&#39;feature_a&#39;</span>,<span class="st">&#39;feature_b&#39;</span>]).<span class="bu">apply</span>(<span class="kw">lambda</span> df: df.loc[df.feature_c.idxmax()])</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>some_df.groupby([<span class="st">&#39;feature_a&#39;</span>]).feature_b.agg([<span class="bu">len</span>,<span class="bu">min</span>,<span class="bu">max</span>])</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Convert Pandas datatype &quot;&quot;&quot;</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.astype(<span class="st">&#39;float64&#39;</span>)</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Select NaN entries &quot;&quot;&quot;</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>some_df[pd.isnull(some_df.some_feature)]</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Filling in Nan &quot;&quot;&quot;</span></span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.fillna(<span class="st">&quot;unknown&quot;</span>)</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Rename a column &quot;&quot;&quot;</span></span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>some_df.rename(columns<span class="op">=</span>{<span class="st">&#39;from_name&#39;</span>: <span class="st">&#39;to_name&#39;</span>})</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Joining dataframes &quot;&quot;&quot;</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>pd.concat([some_df_a, some_df_b])</span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>left_df <span class="op">=</span> some_df_a.set_index([<span class="st">&#39;title&#39;</span>, <span class="st">&#39;date&#39;</span>])</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>right_df <span class="op">=</span> some_df_b.set_index([<span class="st">&#39;title&#39;</span>, <span class="st">&#39;date&#39;</span>])</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>left_df.join(right_df, lsuffix<span class="op">=</span><span class="st">&#39;_l&#39;</span>, rsuffix<span class="op">=</span><span class="st">&#39;_r&#39;</span>)</span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot; Misc useful funs &quot;&quot;&quot;</span></span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(train_data[features])</span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>.notnull()</span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">&#39;max_rows&#39;</span>, <span class="dv">5</span>)</span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a>X.describe()</span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>X.head()</span>
<span id="cb15-99"><a href="#cb15-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.mean()</span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.unique()</span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.value_counts()</span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a>some_df.some_feature.dtype</span>
<span id="cb15-107"><a href="#cb15-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-108"><a href="#cb15-108" aria-hidden="true" tabindex="-1"></a>some_df.dtypes</span></code></pre></div>
<h2 id="scikit">Scikit</h2>
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Create a decision tree using scikit &quot;&quot;&quot;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeRegressor</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>some_model <span class="op">=</span> DecisionTreeRegressor(random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>some_model.fit(X,y)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>some_model.predict(x)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Scikit calc MAE &quot;&quot;&quot;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>predict <span class="op">=</span> some_model.predict(X)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>mean_absolute_error(y, predict)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; scikit create a test split &quot;&quot;&quot;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>train_X, val_X, train_y, val_y <span class="op">=</span> train_test_split(X, y, random_state <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Then define some model on the train_X and train_y data &quot;&quot;&quot;</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>mean_absolute_error(val_y, some_predictions)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Random Forests &quot;&quot;&quot;</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>forest_model <span class="op">=</span> RandomForestRegressor(random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>forest_model.fit(train_X, train_y)</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>some_predictions<span class="op">=</span> forest_model.predict(val_X)</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Imputation &quot;&quot;&quot;</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> SimpleImputer</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>some_imputer <span class="op">=</span> SimpleImputer()</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>imputed_X_train <span class="op">=</span> pd.DataFrame(some_imputer.fit_transform(X_train))</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>imputed_X_valid <span class="op">=</span> pd.DataFrame(some_imputer.transform(X_valid))</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Imputation removed column names; put them back &quot;&quot;&quot;</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>imputed_X_train.columns <span class="op">=</span> X_train.columns</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>imputed_X_valid.columns <span class="op">=</span> X_valid.columns</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;MAE from Approach 2 (Imputation):&quot;</span>)</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(score_dataset(imputed_X_train, imputed_X_valid, y_train, y_valid))</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Categorical Variables one hot is usiually best, from kaggle &quot;&quot;&quot;</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> (X_train.dtypes <span class="op">==</span> <span class="st">&#39;object&#39;</span>)</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>object_cols <span class="op">=</span> <span class="bu">list</span>(s[s].index)</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> OneHotEncoder</span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Apply one-hot encoder to each column with categorical data &quot;&quot;&quot;</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a>OH_encoder <span class="op">=</span> OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">&#39;ignore&#39;</span>, sparse<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a>OH_cols_train <span class="op">=</span> pd.DataFrame(OH_encoder.fit_transform(X_train[object_cols]))</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a>OH_cols_valid <span class="op">=</span> pd.DataFrame(OH_encoder.transform(X_valid[object_cols]))</span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; One-hot encoding removed index; put it back &quot;&quot;&quot;</span></span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a>OH_cols_train.index <span class="op">=</span> X_train.index</span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a>OH_cols_valid.index <span class="op">=</span> X_valid.index</span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Remove categorical columns (will replace with one-hot encoding) &quot;&quot;&quot;</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a>num_X_train <span class="op">=</span> X_train.drop(object_cols, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a>num_X_valid <span class="op">=</span> X_valid.drop(object_cols, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Add one-hot encoded columns to numerical features &quot;&quot;&quot;</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>OH_X_train <span class="op">=</span> pd.concat([num_X_train, OH_cols_train], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>OH_X_valid <span class="op">=</span> pd.concat([num_X_valid, OH_cols_valid], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; Ensure all columns have string type &quot;&quot;&quot;</span></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a>OH_X_train.columns <span class="op">=</span> OH_X_train.columns.astype(<span class="bu">str</span>)</span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>OH_X_valid.columns <span class="op">=</span> OH_X_valid.columns.astype(<span class="bu">str</span>)</span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; sklearn pipelines &quot;&quot;&quot;</span></span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a>categorical_transformer <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;imputer&#39;</span>, SimpleImputer(strategy<span class="op">=</span><span class="st">&#39;most_frequent&#39;</span>)),</span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;onehot&#39;</span>, OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">&#39;ignore&#39;</span>))</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; sklearn cross-validation &quot;&quot;&quot;</span></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> cross_val_score</span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a>scores <span class="op">=</span> <span class="op">-</span><span class="dv">1</span> <span class="op">*</span> cross_val_score(my_pipeline, X, y,</span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a>                              cv<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a>                              scoring<span class="op">=</span><span class="st">&#39;neg_mean_absolute_error&#39;</span>)</span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot; </span></span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a><span class="co">XGBoost  rules of thumb: </span></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a><span class="co">- n_estimators usually between 100 - 1000</span></span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a><span class="co">- In general, a small learning rate and large number of estimators </span></span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a><span class="co">will yield more accurate XGBoost models</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot;</span></span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> xgboost <span class="im">import</span> XGBRegressor</span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>my_model <span class="op">=</span> XGBRegressor()</span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a>my_model.fit(X_train, y_train)</span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a>my_model <span class="op">=</span> XGBRegressor(n_estimators<span class="op">=</span><span class="dv">500</span>)</span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a>my_model.fit(X_train, y_train, </span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>             early_stopping_rounds<span class="op">=</span><span class="dv">5</span>, </span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>             eval_set<span class="op">=</span>[(X_valid, y_valid)],</span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a>             verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<h2 id="phoenix">Phoenix</h2>
<h3 id="plugs">Plugs</h3>
<p>module plugs must have two funcs: init, call</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">NothingPlug</span> <span class="kw">do</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init<span class="fu">(</span>opts<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>opts</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> call<span class="fu">(</span>conn, _opts<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>conn</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="golang">Golang</h2>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">go</span> get <span class="at">-u</span> ./...</span></code></pre></div>
<h2 id="oauth">Oauth</h2>
<p>https://www.oauth.com/</p>
<p>Used for integrating applictions with other services.</p>
<p>Important ! register redirect url’s immediately.</p>
<p>Redirection attack where a access token can be interpreted by an
attacker.</p>
<p>Dont register multiple redirect url’s to compensate for starting from
multiple states in the app. Instead use the state parameter. ##
React</p>
<p>https://scrimba.com/learn/learnreact</p>
<p>global var ReactDOM</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello<span class="op">&lt;/</span>h1<span class="op">&gt;,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;root&quot;</span>))</span></code></pre></div>
<h2 id="components">Components</h2>
<p>All React components must act like pure functions with respect to
their props.</p>
<p>Pascal case component, not camel case</p>
<p>Wrap it in angle brackets in ReactDOM.render()</p>
<p>Components can have parent child relationship</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Navbar</span>() {</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">MainContent</span>() {</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>Navbar <span class="op">/&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>MainContent <span class="op">/&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;/</span>div<span class="op">&gt;,</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;root&quot;</span>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h2 id="jsx">JSX</h2>
<p>Like html with some differences.</p>
<p>html =&gt; JSX</p>
<p>class =&gt; className</p>
<h2 id="organization">organization</h2>
<p>create a react project</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>npx create<span class="op">-</span>react<span class="op">-</span>app hello</span></code></pre></div>
<p>add a router</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install react-router-dom@6</span></code></pre></div>
<p>install material ui: https://mui.com/getting-started/installation/ ##
Props</p>
<p>Use mustache syntax</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&quot;react-dom&quot;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> userName <span class="op">=</span> <span class="st">&quot;me&quot;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello {userName} <span class="op">!&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="op">&lt;</span>App <span class="op">/&gt;,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;root&quot;</span>))</span></code></pre></div>
<pre><code>
// Somewhat bogus example

export default function Contact(props) {
return (
&lt;div className=&quot;contact-card&quot;&gt;
&lt;img src={props.image}/&gt;
&lt;h3&gt;{props.name}&lt;/h3&gt;
&lt;div className=&quot;info-group&quot;&gt;
&lt;p&gt;{props.phone}&lt;/p&gt;
&lt;/div&gt;
&lt;div className=&quot;info-group&quot;&gt;
&lt;img src=&quot;./images/mail-icon.png&quot; /&gt;
&lt;p&gt;{props.email}&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
)
}

function App() {
return (
&lt;div className=&quot;contacts&quot;&gt;
&lt;Contact 
image=&quot;./images/mr-whiskerson.png&quot; 
name=&quot;Mr. Whiskerson&quot;
phone=&quot;(212) 555-1234&quot;
email=&quot;mr.whiskaz@catnap.meow&quot;
/&gt;
&lt;Contact 
img=&quot;./images/fluffykins.png&quot;
name=&quot;Fluffykins&quot;
phone=&quot;(212) 555-2345&quot;
email=&quot;fluff@me.com&quot;
/&gt;
&lt;/div&gt;
)
}
</code></pre>
<h2 id="props-and-arrays">Props and arrays</h2>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">// contrived example from scrimba</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>jokesData <span class="op">=</span> [</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">setup</span><span class="op">:</span> <span class="st">&quot;I got my daughter a fridge for her birthday.&quot;</span><span class="op">,</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">punchline</span><span class="op">:</span> <span class="st">&quot;I can&#39;t wait to see her face light up when she opens it.&quot;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">setup</span><span class="op">:</span> <span class="st">&quot;How did the hacker escape the police?&quot;</span><span class="op">,</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">punchline</span><span class="op">:</span> <span class="st">&quot;He just ransomware!&quot;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">Joke</span>(props) {</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>      {props<span class="op">.</span><span class="at">setup</span> <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>h3<span class="op">&gt;</span><span class="dt">Setup</span><span class="op">:</span> {props<span class="op">.</span><span class="at">setup</span>}<span class="op">&lt;/</span>h3<span class="op">&gt;</span>}</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>p<span class="op">&gt;</span><span class="dt">Punchline</span><span class="op">:</span> {props<span class="op">.</span><span class="at">punchline</span>}<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>hr <span class="op">/&gt;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> jokeElements <span class="op">=</span> jokesData<span class="op">.</span><span class="fu">map</span>(joke <span class="kw">=&gt;</span> {</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">&lt;</span>Joke setup<span class="op">=</span>{joke<span class="op">.</span><span class="at">setup</span>} punchline<span class="op">=</span>{joke<span class="op">.</span><span class="at">punchline</span>} <span class="op">/&gt;</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>      {jokeElements}</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="events">Events</h2>
<p>Do not use the “()” for function call in the JSX</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleClick</span>() {</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;I was clicked!&quot;</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleOnMouseOver</span>() {</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;MouseOver&quot;</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;container&quot;</span><span class="op">&gt;</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>img </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>        src<span class="op">=</span><span class="st">&quot;https://picsum.photos/640/360&quot;</span> </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>        onMouseOver<span class="op">=</span>{handleOnMouseOver} </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>      <span class="op">/&gt;</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>button onClick<span class="op">=</span>{handleClick}<span class="op">&gt;</span>Click me<span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h2 id="state">State</h2>
<p>React.useState()</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [someval<span class="op">,</span>setterFunc] <span class="op">=</span> React<span class="op">.</span><span class="fu">useState</span>(someInitVal)</span></code></pre></div>
<p>Converting a Function to a Class</p>
<p>You can convert a function component like Clock to a class in five
steps:</p>
<ol type="1">
<li><p>Create an ES6 class, with the same name, that extends
React.Component.</p>
<ol start="2" type="1">
<li><p>Add a single empty method to it called render().</p></li>
<li><p>Move the body of the function into the render() method.</p></li>
<li><p>Replace props with this.props in the render() body.</p></li>
<li><p>Delete the remaining empty function declaration. ##
(Lifecycle)[https://reactjs.org/docs/state-and-lifecycle.html]</p></li>
</ol></li>
</ol>
<p>In applications with many components, it’s very important to free up
resources taken by the components when they are destroyed.</p>
<p>We want to set up a timer whenever the Clock is rendered to the DOM
for the first time. This is called “mounting” in React.</p>
<p>We also want to clear that timer whenever the DOM produced by the
Clock is removed. This is called “unmounting” in React. ##
useEffects</p>
<p>used for side effects ie API calls ## react-three-fiber</p>
<p>https://github.com/pmndrs/react-three-fiber</p>
<p>https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene</p>
<h3 id="basics">Basics</h3>
<p>scene -&gt; camera -&gt; renderer -&gt; attach to canvas</p>
<p>geometry -&gt; mesh -&gt; scene.add()</p>
<p>frustum - A frustum is the name of a 3d shape that is like a pyramid
with the tip sliced off. In other words think of the word “frustum” as
another 3D shape like sphere, cube, prism, frustum.</p>
<p>mesh = geometry + material + orientation</p>
<p>Example set camera width to canvas</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">render</span>(time) {</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>      time <span class="op">*=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> canvas <span class="op">=</span> renderer<span class="op">.</span><span class="at">domElement</span><span class="op">;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>      camera<span class="op">.</span><span class="at">aspect</span> <span class="op">=</span> canvas<span class="op">.</span><span class="at">clientWidth</span> <span class="op">/</span> canvas<span class="op">.</span><span class="at">clientHeight</span><span class="op">;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>      camera<span class="op">.</span><span class="fu">updateProjectionMatrix</span>()<span class="op">;</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span></span></code></pre></div>
<h3 id="create-app">Create app</h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> create-react-app my-app</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-app</span></code></pre></div>
<h3 id="install-dependencies">Install dependencies</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install three @react-three/fiber</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">--save</span> husky lint-staged prettier</span></code></pre></div>
<h3 id="start">Start</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run start</span></code></pre></div>
<h2 id="node.js">Node.js</h2>
<div class="sourceCode" id="cb32"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">## initialize minimum node project with a minimal package.json</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> init <span class="at">-y</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">## install a package </span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> i <span class="op">&lt;</span>some package<span class="op">&gt;</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> i express </span></code></pre></div>
<h2 id="jwt-jot">JWT “jot”</h2>
<p>https://datatracker.ietf.org/doc/html/rfc7519</p>
<p>https://www.bezkoder.com/jwt-json-web-token/</p>
<p>https://www.bezkoder.com/react-express-authentication-jwt/</p>
<p>https://blog.galmalachi.com/react-nodejs-and-jwt-authentication-the-right-way</p>
<p>https://jwt.io/introduction/</p>
<p>JWT is typically in header</p>
<pre class="http"><code>x-access-token: [header].[payload].[signature]
</code></pre>
<h2 id="security">Security</h2>
<p>*** USE HTTPS ***</p>
<p>JWT does NOT secure your data. JWT does not hide, obscure, secure
data at all.</p>
<p>The purpose of JWT is to prove that the data is generated by an
authentic source.</p>
<p>So, what if there is a Man-in-the-middle attack that can get JWT,
then decode user information? Yes, that is possible, so always make sure
that your application has the HTTPS encryption. ## Basic Flow</p>
<p>Browser Server 1) send login(usr,pw) =&gt;<br />
2) create JWT with secret 3) &lt;= return JWT 4) send request with JWT
in header =&gt; 5) validate JWT 6) &lt;= return response ## Storing JWT
on the client side</p>
<ul>
<li><p>Browser: Local Storage</p></li>
<li><p>IOS: Keychain</p></li>
<li><p>Android: SharedPreferences ## JWT Token</p></li>
<li><p>Header</p></li>
<li><p>Payload</p></li>
<li><p>Signature</p></li>
</ul>
<h3 id="header">Header</h3>
<div class="sourceCode" id="cb34"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;typ&quot;</span><span class="fu">:</span> <span class="st">&quot;JWT&quot;</span><span class="fu">,</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;alg&quot;</span><span class="fu">:</span> <span class="st">&quot;HS256&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="payload">Payload</h3>
<p>What is stored in the token</p>
<h4 id="standard-fields">Standard fields</h4>
<ul>
<li><p>iss: issuer</p></li>
<li><p>iat: time issued</p></li>
<li><p>exp: expiration</p></li>
</ul>
<div class="sourceCode" id="cb35"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;userId&quot;</span><span class="fu">:</span> <span class="st">&quot;some user&quot;</span><span class="fu">,</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;username&quot;</span><span class="fu">:</span> <span class="st">&quot;anon&quot;</span><span class="fu">,</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;anon@anon.io&quot;</span><span class="fu">,</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">//</span> <span class="er">standard</span> <span class="er">fields</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iss&quot;</span><span class="fu">:</span> <span class="st">&quot;zKoder, author of bezkoder.com&quot;</span><span class="fu">,</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iat&quot;</span><span class="fu">:</span> <span class="dv">1570238918</span><span class="fu">,</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;exp&quot;</span><span class="fu">:</span> <span class="dv">1570238992</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="signature">Signature</h3>
<div class="sourceCode" id="cb36"><pre
class="sourceCode js"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> data <span class="op">=</span> <span class="fu">Base64UrlEncode</span>(header) <span class="op">+</span> <span class="st">&#39;.&#39;</span> <span class="op">+</span> <span class="fu">Base64UrlEncode</span>(payload)<span class="op">;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> hashedData <span class="op">=</span> <span class="fu">Hash</span>(data<span class="op">,</span> secret)<span class="op">;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> signature <span class="op">=</span> <span class="fu">Base64UrlEncode</span>(hashedData)<span class="op">;</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h2 id="jwt-node-express-mysql">JWT + Node + Express + MySQL</h2>
<p>https://www.bezkoder.com/node-js-jwt-authentication-mysql/</p>
<h3 id="signup-and-login-flow">Signup and Login flow</h3>
<p>User Registration</p>
<p>POST api/auth/signup =&gt; Check and sve user to db</p>
<p>&lt;= Register successfully message</p>
<p>User Login</p>
<p>POST api/suth/sigin =&gt; Authenticate</p>
<p>&lt;= Create JWT string with secret return {token, user info,
authorities}</p>
<p>Access Resource</p>
<p>JWT on x-access-token =&gt; Check JWT signature, get user info and
authenticate header</p>
<p>&lt;= return content based in authorization</p>
<h3 id="jwt-refresh-flow">JWT Refresh flow</h3>
<p>User Login</p>
<p>POST api/suth/sigin =&gt; Authenticate</p>
<p>&lt;= Create JWT string with secret return {token, *refreshToken,
user info, authorities}</p>
<p>Access Resources with Expired Token</p>
<p>Request data with JWT =&gt; Validate and throw TokenExpiredError in
the header</p>
<p>&lt;= Return Token Expired message</p>
<p>Token Refresh</p>
<p>POST api/auth/refreshToken =&gt; Verify Refresh Token</p>
<p>&lt;= return {new token, resfreshToken} ## Buildspace Solana
project</p>
<p>program:</p>
<ol type="a">
<li><p>piece of code that lives on the blockchain</p></li>
<li><p>programs are stateless</p></li>
<li><p>programs interact with accounts for data</p></li>
</ol>
<p>accounts</p>
<ol type="a">
<li><p>stores data</p></li>
<li><p>users can have 1,000s of accounts</p></li>
</ol>
<p>Configuring Solana</p>
<p>Install rust
https://doc.rust-lang.org/book/ch01-01-installation.html</p>
<p>Install Solana:
https://docs.solana.com/cli/install-solana-cli-tools#use-solanas-install-tool</p>
<p>set Solana network to localhost</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">solana</span> config set <span class="at">--url</span> localhost </span></code></pre></div>
<p>start a local Solana node</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">solana-test-validator</span> </span></code></pre></div>
<p>Install mocha, anchor, npm anchor, npm solana/web3.js</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> mocha</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="ex">cargo</span> install <span class="at">--git</span> https://github.com/project-serum/anchor anchor-cli <span class="at">--locked</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install @project-serum/anchor @solana/web3.js</span></code></pre></div>
<p>Create a project</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="ex">anchor</span> init myproject <span class="at">--javascript</span> </span></code></pre></div>
<p>Generate local Solana wallet</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">solana-keygen</span> new</span></code></pre></div>
<p>Get public key for local wallet</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">solana</span> address</span></code></pre></div>
<p>airdrop sol</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="ex">solana</span> airdrop 5 93SAmhpBneKq6UybsFbn5gf9kzAcooCz732bGaGiBehg  <span class="at">--url</span> https://api.devnet.solana.com</span></code></pre></div>
<h2 id="devops">DevOps</h2>
<h3 id="antipattern">AntiPattern</h3>
<p>nanoservices - a service whose overhead outweighs it’s utility</p>
<h3 id="terraform">Terraform</h3>
<h3 id="blocks">Blocks</h3>
<p>block template:</p>
<pre><code>
block_type label_one label_two {
key = value
embedded_block {
key = value
}
}
</code></pre>
<h3 id="object-types">object types:</h3>
<ul>
<li>string</li>
<li>number</li>
<li>bool</li>
<li>list</li>
<li>map</li>
</ul>
<h3 id="keyword-references">Keyword references</h3>
<p>var.somevariable</p>
<p>local.someobject.somevar</p>
<p>module.someobject.somevar</p>
<h3 id="provisioners">Provisioners</h3>
<p>last resort prefer puppet,chef, ansible</p>
<p>local - executes on local server</p>
<p>remote - executes on remote server</p>
<p>can happen at creation or destruction</p>
<p>example file provisioner with heredoc syntax:</p>
<pre><code>
provisioner &quot;file&quot; {
content = &lt;&lt;EOF
access_key = 
secret_key = 
EOF
destination = &quot;/home/aws-user/.s3cfg&quot;
}
</code></pre>
<h3 id="resources">Resources</h3>
<p>example random int</p>
<pre><code>
resource &quot;random_integer&quot; &quot;rand&quot;{
min = 10000
max = 99999
}
</code></pre>
<h3 id="functions">Functions</h3>
<p>merge() - takes two maps and merges them.</p>
<h3 id="cli">CLI</h3>
<p>terraform init</p>
<p>terraform plan</p>
<p>terraform apply</p>
<h3 id="variables">variables</h3>
<p>precedence: env, file, command line</p>
<h3 id="environments">Environments</h3>
<p>use workspaces as recommended by Hasihcorp</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">terraform</span> workspace new Developement</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="ex">terrform</span> plan <span class="at">-out</span> dev.tfplan</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="ex">terrform</span> apply <span class="st">&quot;dev.tfpaln&quot;</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<p>use vars from workspace</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>locals {</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  env_name <span class="op">=</span> <span class="fu">lower</span>(terrform<span class="op">.</span><span class="at">workspace</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  common_tags <span class="op">=</span> {</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>        Environment <span class="op">=</span> local<span class="op">.</span><span class="at">env_name</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="secrets">Secrets</h3>
<p>3 options: varibales file, env var, secrets management</p>
<p>use env vars for credentials by simply exporting and referencing
them</p>
<h3 id="modules">Modules</h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>module <span class="st">&quot;bucket&quot;</span> {</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  name <span class="op">=</span> <span class="st">&quot;some-bucket&quot;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  source <span class="op">=</span> <span class="st">&quot;.</span><span class="sc">\\</span><span class="st">Modules</span><span class="sc">\s</span><span class="st">omefiles&quot;</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>resource <span class="st">&quot;aws_s3_bucket_object&quot;</span> {</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  bucket <span class="op">=</span> module<span class="op">.</span><span class="at">bucket</span><span class="op">.</span><span class="at">bucket_id</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  [<span class="op">...</span>]</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>registry.terraform.io ## GCP</p>
<h3 id="serverlesscompute-services">Serverless/Compute Services</h3>
<p>code and deploy without need to worry about infra and scale</p>
<p>only available for node.js and python as of 4/7/22</p>
<h3 id="app-engine">App Engine</h3>
<p>PAAS - good for web apps</p>
<p>supports more languages than Compute Services</p>
<h3 id="cloud-sql">Cloud SQL</h3>
<p>Postgres and MySQL</p>
<h3 id="persistent-disks">Persistent Disks</h3>
<p>== s3</p>
<p>block storage</p>
<p>16 persistent disks</p>
<h3 id="file-store">File store</h3>
<p>== NAS</p>
<h3 id="bigtable">Bigtable</h3>
<h3 id="cloud-storage">Cloud Storage</h3>
<p>blob storage</p>
<h3 id="cloud-spanner">Cloud Spanner</h3>
<p>dist transaction support</p>
<p>depends on true time, 200ms clock drift globally</p>
<h3 id="gcp">GCP</h3>
<h4 id="logging">Logging</h4>
<h4 id="data-flow">Data Flow</h4>
<p>M.P.R. or N.C.S.</p>
<p>Moving -&gt; Network</p>
<p>Processing -&gt; Compute</p>
<p>Remembering -&gt; Storage</p>
<h4 id="storage">Storage</h4>
<p>working with buckets</p>
<p>gsutil</p>
<p>gsutil ls gs://some_bucket</p>
<p>gsutil mb -l somelocation gs://some_bucket</p>
<p>gsutil label get gs://some_bucket</p>
<p>gsutil label get/set …</p>
<p>gsutil label ch -l “label:value” gs://somebucket</p>
<h5 id="versioning">Versioning</h5>
<p>gsutil versioning get gs://somebucket</p>
<p>gsutil versioning set on gs://somebucket</p>
<p>Use ls -a to see versioning</p>
<p>-a Includes non-current object versions / generations in the listing
(only useful with a versioning-enabled bucket). If combined with -l
option also prints metageneration for each listed object.</p>
<p>gsutil ls -a</p>
<h5 id="access">Access</h5>
<p>gsutil acl ch -u AllUsers:R gs://somebucket/someobject</p>
<h4 id="compute">Compute</h4>
<p>gcloud</p>
<p>gcloud compute machine-types list –filter f1-micro</p>
<p>gcloud config get-value project</p>
<p>gcloud services list</p>
<p>gcloud compute instances list</p>
<p>gcloud compute instances create somevm</p>
<p>gcloud compute instances delete somevm</p>
<p>gcloud config init</p>
<p>gcloud config list</p>
<p>gcloud config configurations create SOMECONFIG</p>
<p>gcloud config configurations activate SOMECONFIG</p>
<p>gcloud config set|unset <property> <value></p>
<p>gcloud config get-value <property></p>
<p>gcloud compute machine-types list –filter=“NAME:f1-micro”</p>
<p>gcloud compute machine-types list –filter=“NAME:f1-micro AND
ZONE:us-east*”</p>
<p>gcloud compute instances list</p>
<p>gcloud compute ssh myhappyvm</p>
<h5 id="rest-metadata-api">REST metadata API</h5>
<p>curl -H “Metadata-Flavor:Google”
metadata.google.internal/computeMetadata/v1/</p>
<p>curl -H “Metadata-Flavor:Google”
metadata.google.internal/computeMetadata/v1/instance</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config get project</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set compute/region us-east </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set compute/zone us-east1-b </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="ex">gsutil</span> mb <span class="at">-p</span> playground-someproject <span class="at">-c</span> Standard <span class="at">-l</span> us <span class="at">-b</span> on gs://challengevmbucket</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> compute instances create challengevm <span class="at">--preemptible</span> <span class="at">--no-restart-on-failure</span> <span class="at">--maintenance-policy</span><span class="op">=</span>terminate <span class="at">--machine-type</span><span class="op">=</span>f1-micro</span></code></pre></div>
<h4 id="security-1">Security</h4>
<p>AAA Data flow</p>
<p>-&gt; AuthN authen</p>
<p>-&gt; AuthZ authorization, IAM Identity and Access Management</p>
<p>authz hierarchy</p>
<p>organization</p>
<p>folders</p>
<p>project</p>
<p>-&gt; Acct accounting system records failed logins, GCS Object
Lifecycle management</p>
<p>Least Privelege</p>
<p>defense in depth</p>
<p>fail securely</p>
<p>https://owasp.org/Top10/A04_2021-Insecure_Design/#secure-design</p>
<h5 id="iam">IAM</h5>
<h6 id="roles">Roles</h6>
<p>primitive roles</p>
<ul>
<li><p>viewer ro</p>
<pre><code>  - editor view + change

  - owner view + editor + access and billing</code></pre>
<p>predefined roles - used for specific GCP resources</p>
<p>custom role</p>
<pre><code>  project or organization level</code></pre></li>
</ul>
<h6 id="members">Members</h6>
<ul>
<li><p>user</p>
<ul>
<li><p>serviceAccount</p></li>
<li><p>group</p></li>
<li><p>domain</p></li>
<li><p>allAutheticatedUsers - *resource public to any gmail account DONT
USE</p></li>
<li><p>allUsers - anon</p></li>
</ul></li>
</ul>
<h6 id="groups">Groups</h6>
<p>collection of accounts and service accounts</p>
<p>every group has a email addr</p>
<ul>
<li>this should be default, use it for most situations *</li>
</ul>
<h6 id="policies">Policies</h6>
<p>binds members to roles</p>
<p>attach policies to resource</p>
<p>Managing policies</p>
<pre class="shell"><code>
gcloud [GROUP] add-iam-policy-binding [RESOURCE-NAME] --role [ROLE-ID-TO-GRANT] --member user: [USER-EMAIL]

gcloud [GROUP] remove-iam-policy-binding [RESOURCE-NAME] --role [ROLE-ID-TO-REVOKE] --member user: [USER-EMAIL]
</code></pre>
<p>commands missing</p>
<p>atuscaling</p>
<p>firewall ruls</p>
<p>service accounts</p>
<script>
    const darkModeToggle = document.getElementById('dark-mode-toggle')
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('latex-dark')
    })
</script>
<br>
<br>
<hr>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.

</body>
</html>
